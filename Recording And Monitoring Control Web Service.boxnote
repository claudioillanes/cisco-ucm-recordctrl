{"head":1633,"savepointDataFileId":"590590109876","savepointListObject":{},"lastEditTimestamp":1617966974567,"diffChangeset":"Z:2xw>1|21=24t=1*1w*6-6*1w*7*8+7$Monitor","invalidDiffChangeset":false,"authorList":{"8575488":{"authorName":"Paul Tindall","authorCustomAvatarUrl":"/users/8575488/avatar"}},"diffAuthorList":{"8575488":true},"shouldCreateSavepointBeforeApplyingNextRevision":false,"firstKeyRevision":5,"atext":{"text":"Provides a simple microservice approach to controlling recording and monitoring at a CUCM phone.   Its primary use is to allow a CCE Finesse desktop agent to trigger recording via a workflow but can equally well be used by any client that can issue an HTTP PUT request.   All modes of recording and monitoring are supported as well as notification/warning tone options.\n\nNOTE.  This version should be regarded as a sample that is not fully hardened and has only undergone limited testing.  It potentially still needs work to cover reconnection attempts following JTAPI failure.  It also outputs device state changes for diagnostic purposes so you should change that as required if you plan to deploy this into serious use.\n\n\nDeployment\n\n*Configure your CUCM for recording and enable selective recording on the required devices.\n*Create a JTAPI user and assign all the phones to it for which recording control is required.\n*Deploy the WAR file to an application server of your choice.\n*Modify the web.xml descriptor to configure the CUCM address, user and password plus any of the optional parameters.\n*Restart the web application and check in its output log that a connection was successfully established to the CUCM.\n*Create a Finesse workflow to invoke the start recording operation.\n\n\nRecording Servlet Configuration Parameters\n\nCUCMHost\nHost name of IP address of your CUCM.\nCUCMJTapiUser\nCUCM JTAPI application user name.\nCUCMJTapiPassword\nCUCM JTAPI application user password.\nPlayTone\nDefault setting for recording tone:  LOCAL, REMOTE, BOTH, or NONE.\nPhoneNotification\nDefault setting for visual recording notification at the phone.\n\n\nControlling Recording\n\nHTTP PUT request URL\nhttp://<host:port/path>/recording/<extensionID>\nExample request JSON body content\n{\n     \"action\" : \"START\",\n     \"tone\" : \"LOCAL\",\n     \"notify\" : true\n}\n*action\nRecording Action\nValues:  START or STOP\nMandatory\ntone\nDetermines presentation of recorder warning tones. \nValues:  LOCAL, REMOTE, BOTH, NONE\nOptional.  If not included, the default is the value configured in web.xml or NONE if that is also omitted.\nnotify\nDetermines whether visual recording status is displayed on the user's phone.  \nValues:   true or false\nOptional.  If not included, the default is the value configured in web.xml or false if that is also omitted.\n\n\nMonitoring Servlet Configuration Parameters\n\nPlayTone\nDefault setting for monitoring tone:  LOCAL, REMOTE, BOTH, or NONE.\nMonitorType\nDefault setting for the monitor operation type: SILENT or WHISPER.\n\n\nControlling Monitoring\n\nHTTP PUT request URL\nhttp://<host:port/path>/monitor/<monitoredExtensionID>\nExample request JSON body content\n{\n     \"action\" : \"START\",\n     \"tone\" : \"NONE\",\n     \"monitor\" : \"4040\",\n     \"type\": \"WHISPER\"\n}\n*action\n*Monitoring Action\n*Values:  START\n*Mandatory\n*tone\n*Determines presentation of monitor warning tones. \n*Values:  LOCAL, REMOTE, BOTH, NONE\n*Optional.  If not included, the default is the value configured in web.xml or NONE if that is also omitted.\n*monitor\n*Specifies the phone extension which will listen to the monitoring session.  \n*Value:   a valid DN that is associated with the JTAPI user.\n*Mandatory.\ntype\nSets the type of monitor to establish.\nValues:  SILENT or WHISPER\nOptional.  If not included, the default is the value configured in web.xml or SILENT if that is also omitted.\n*\n\nIMPORTANT\n\nWhen making use of this sample, be mindful that normal custom development caveats apply:\n*It is the users responsibility to ensure that it satisfies their specific use case and performs adequately to meet requirements. \n*This is not part of any Cisco product.\n*Support is best-effort via the developer community forum; there is no Cisco TAC support.\n*There is no guarantee that it will automatically work unchanged on future product versions.\n\n","attribs":"*4+1t*4*7*8+f*4+g*4*7*8+3*4+28*4*7*8+1*4+28*4*7*8+1*4+8*4*7*8+2s*4|2+2*4*12*8+9r*4|3+3*4*9*7*8+a*4|2+2*4*2*11*3+1*4*7*8+2h*4|1+1*4*2*11*3+1*4*7*8+w*4+3*4*7*8+4*4+7*4*7*8+6*4+13*4*7*8+1*4|1+1*4*2*11*3+1*4*7*8+1o*4|1+1*4*2*11*3+1*4*7*8+37*4|1+1*4*2*11*3+1*4|1+38*4*2*11*3+1*4*7*8+1u*4|3+3*4*9*7*8+b*4*9*8+7*4*9*7*8+d*4*9*8+1*4*9*7*8+1*4*9*8+9*4|2+2*4*8+8*4*k*l|1+1*4*7*8+11*4*m*l|1+1*4*8+d*4*k*o|1+1*4*7*8+x*4*m*o|1+1*4*8+h*4*k*p|1+1*4*7*8+11*4*m*p|1+1*4*8+8*4*k*q|1+1*4*8+y*4*7*8+w*4*m*q|1+1*4*8+h*k*r|1+1*4*8+k*4*7*8+7*4*8+q*4*7*8+4*4*8+5*4*7*8+1*m*r|1+1*4|2+2*4*9*7*8+l*4|2+2*4*8+k*4*i*a*b|1+1*4*t*8+1b*4*j*d*b|1+1*4*7*8+9*4*8+h*4*7*8+7*i*a*13|1+1*4*7*8+1*4*7*w*v*j*d*13|1+1*4*7*8+o*7*w*v*j*d*13|1+1*4*7*8+m*4*7*w*v*j*d*13|1+1*4*7*8+k*4*7*w*v*j*d*13|1+1*4*7*8+1*4*j*d*13|1+1*1*4*2*3+1*4*7*8+6*4*i*a*e|1+1*4*7*8+g*4*j*d*e|1+1*4*7*8+m*4*j*d*e|1+1*4*7*8+9*4*j*d*e|1+1*4*7*8+4*4*i*a*f|1+1*4*7*8+1f*4*7*j*d*f|1+1*4*7*8+y*4*7*j*d*f|1+1*4*7*8+2z*4*j*d*f|1+1*4*7*8+6*4*i*a*g|1+1*4*7*8+26*4*j*d*g|1+1*4*7*8+n*4*j*d*g|1+1*4*7*8+30*4*j*d*g|1+1*4|2+2*4*9*7*8+c*4*9*8+7*4*9*7*8+d*4*9*8+1*4*9*7*8+1*4*9*8+9*4|2+2*4*8+8*4*18*1d|1+1*4*8+k*4*7*8+7*4*8+8*4*7*8+w*4*1a*1d|1+1*4*7*8+b*4*18*1e|1+1*4*8+k*4*7*8+1a*4*1a*1e|1+1*4|2+2*4*9*7*8+m*4|2+2*4*8+k*4*i*1f*1g|1+1*4*t*8+1i*4*j*1i*1g|1+1*4*7*8+9*4*8+h*4*7*8+7*4*i*1f*1j|1+1*4*7*8+1*4*j*1i*1j|1+1*4*7*8+o*4*j*1i*1j|1+1*4*7*8+l*4*j*1i*1j|1+1*4*7*8+o*4*j*1i*1j|1+1*4*7*8+m*4*j*1i*1j|1+1*4*7*8+1*4*j*1i*1j|1+1*1*4*2*3+1*4*7*8+6*4*i*1f*1k|1+1*1*4*2*3+1*1w*7*8+7*4*7*8+a*4*j*1i*1k|1+1*1*4*2*3+1*4*7*8+e*4*j*1i*1k|1+1*1*4*2*3+1*4*7*8+9*4*j*1i*1k|1+1*1*4*2*3+1*4*7*8+4*4*i*1f*1l|1+1*1*4*2*3+1*4*7*8+1e*4*j*1i*1l|1+1*1*4*2*3+1*4*7*8+y*4*j*1i*1l|1+1*1*4*2*3+1*4*7*8+2z*4*j*1i*1l|1+1*1*4*2*3+1*4*7*8+7*4*i*1f*1m|1+1*1*4*2*3+1*4*7*8+24*4*j*1i*1m|1+1*1*4*2*3+1*4*7*8+1n*4*j*1i*1m|1+1*1*4*2*3+1*4*7*8+a*4*j*1i*1m|1+1*4*7*8+4*i*1f*1v|1+1*4*7*8+12*j*1i*1v|1+1*4*7*8+q*4*j*1i*1v|1+1*4*7*8+b*4*8+1v*4*7*8+6*4*8+p*4*j*1i*1v|1+1*1*4*2*3+1*4|2+2*4*9*10*8+9*4|2+2*4*10*8+2g*4|1+1*4*2*11*3+1*4*10*8+3l*4|1+1*4*2*11*3+1*4*10*8+12*4|1+1*4*2*11*3+1*4*10*8+2g*4|1+1*4*2*11*3+1*4*10*8+2j|2+2","opCount":226,"appliedAttribsCount":683,"maxAttribsOnSingleOp":7},"pool":{"numToAttrib":{"0":["author","a.4fz9s4pIrvcRKF5l"],"1":["align","left"],"2":["insertorder","first"],"3":["lmkr","1"],"4":["author","213950319"],"5":["link-MTQ5MTg0OTU1MDE4OC1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF","true"],"6":["removed","true"],"7":["font-color-000000","true"],"8":["font-size-medium","true"],"9":["bold","true"],"10":["struct-tablec1db82c0bf6d4d6887bc947629097144_col63379871b5d54ac196b32b8454d95f87","true"],"11":["struct-tablec1db82c0bf6d4d6887bc947629097144_row5425968cf6394632b87501eebfdd0c18","true"],"12":["struct-tablec1db82c0bf6d4d6887bc947629097144_cola20d5d2b3d8841edb02f619691800c8d","true"],"13":["struct-tablec1db82c0bf6d4d6887bc947629097144_colbbcd28a939d94f938653b94d983bb0d2","true"],"14":["struct-tablec1db82c0bf6d4d6887bc947629097144_row405abde24afd409da579e1c744c1af98","true"],"15":["struct-tablec1db82c0bf6d4d6887bc947629097144_row4a62171303394f0288f45d5ad5ab94c8","true"],"16":["struct-tablec1db82c0bf6d4d6887bc947629097144_rowb4e207bc0c4a425a99326c845d5142e4","true"],"17":["link-MTQ5MTg0OTkyNzI0MC1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF","true"],"18":["struct-prop-table-col_width_percentage_32","true"],"19":["struct-prop-table-col_width_percentage_68","true"],"20":["struct-table7108739cf15842b8ba3df0bbbb80d07c_cole0f07466604248bb88767cf21e1d90ba","true"],"21":["struct-table7108739cf15842b8ba3df0bbbb80d07c_row358c9ed47f504171a51265161a457758","true"],"22":["struct-table7108739cf15842b8ba3df0bbbb80d07c_coledd54a395a4f4e4ea5c91985a714b91c","true"],"23":["struct-table7108739cf15842b8ba3df0bbbb80d07c_col044a483ec33a4fe2beef7e4af1d2f378","true"],"24":["struct-table7108739cf15842b8ba3df0bbbb80d07c_rowc3155e249c754a02b71ceee1e8697d52","true"],"25":["struct-table7108739cf15842b8ba3df0bbbb80d07c_row7e691d66daa54413abcadd9683cd607e","true"],"26":["struct-table7108739cf15842b8ba3df0bbbb80d07c_rowc26b13214d8f49579e113251b1eab088","true"],"27":["struct-table7108739cf15842b8ba3df0bbbb80d07c_rowe8806b2ca2ef48cc8dc040f2052e9a9e","true"],"28":["font-color-000000",""],"29":["font-color-6f87ff","true"],"30":["font-color-6f87ff",""],"31":["font-color-f79600","true"],"32":["font-color-9f3fed","true"],"33":["font-color-26c281","true"],"34":["font-color-9f3fed",""],"35":["font-color-26c281",""],"36":["font-color-1b8190","true"],"37":["list","bullet1"],"38":["font-color-ea1f43","true"],"39":["struct-tablec1db82c0bf6d4d6887bc947629097144_row3a3936eba3c84b1dae36e73914aa21ff","true"],"40":["font-color-f79600",""],"41":["align","center"],"42":["font-color-222222","true"],"43":["font-color-222222",""],"44":["struct-table7e5095d0c16d4aae82f618a393562001_cole70f61792644450ea58573f0b1d9887d","true"],"45":["struct-table7e5095d0c16d4aae82f618a393562001_row6528ee1be94b4befbc3636d4fb5eb2a8","true"],"46":["struct-table7e5095d0c16d4aae82f618a393562001_col7b20a03e9811410abc1999e57eb0c4c6","true"],"47":["struct-table7e5095d0c16d4aae82f618a393562001_row2032fdfacfd345308823ee1a6424b089","true"],"48":["struct-table7e5095d0c16d4aae82f618a393562001_row98906cbba574415798258dc1161de939","true"],"49":["struct-table7e5095d0c16d4aae82f618a393562001_row8d588e9ac7284a56a4335d9d471eb7c6","true"],"50":["struct-table7e5095d0c16d4aae82f618a393562001_row76cbc1bf41364d72b89e6d116cff725f","true"],"51":["struct-table28df1d9db25845648a1dda46cd540479_col663e11d75be04dfa84b22e5b76820815","true"],"52":["struct-table28df1d9db25845648a1dda46cd540479_row61aafccfb335400299cf4a8be0813694","true"],"53":["link-MTQ5Njg1MDIzNjUyOS1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF","true"],"54":["struct-table28df1d9db25845648a1dda46cd540479_col177edecbe07e4d9ba087b3d206e98a85","true"],"55":["struct-table28df1d9db25845648a1dda46cd540479_row013f52d315b24e6ca315ea7c7e0c2c20","true"],"56":["struct-table28df1d9db25845648a1dda46cd540479_row672b687faad14a5d978f723a3f90e68e","true"],"57":["struct-table28df1d9db25845648a1dda46cd540479_rowe234930aa7984c60ac54cfc350908d91","true"],"58":["struct-table28df1d9db25845648a1dda46cd540479_row5144d91f06034dc2a5e9b35c6aa55257","true"],"59":["link-MTQ5Njg1MDIzNjUyOS1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF",""],"60":["link-MTQ5Njg1MDU1OTg5NS1odHRwOi8vPGhvc3Q6cG9ydC9wYXRoPi9tb25pdG9yLzxtb25pdG9yZWRlRXh0ZW5zaW9uSUQ+","true"],"61":["link-MTQ5Njg1MDU1OTg5NS1odHRwOi8vPGhvc3Q6cG9ydC9wYXRoPi9tb25pdG9yLzxtb25pdG9yZWRlRXh0ZW5zaW9uSUQ+",""],"62":["link-MTQ5Njg1MDU5NTczNy1odHRwOi8vPGhvc3Q6cG9ydC9wYXRoPi9tb25pdG9yLzxtb25pdG9yZWRFeHRlbnNpb25JRD4=","true"],"63":["link-MTQ5Njg1MDcxOTcyMS1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF","true"],"64":["underline","true"],"65":["underline",""],"66":["link-MTQ5Njg1MDcxOTcyMS1odHRwOi8vJTNDaG9zdDpwb3J0L3BhdGglM0UvcmVjb3JkaW5nLyUzQ2V4dGVuc2lvbklEJTNF",""],"67":["struct-table28df1d9db25845648a1dda46cd540479_row811c32db33034a7f82b1c4427ec172cb","true"],"68":["author","8575488"]},"nextNum":69},"chatHead":-1,"publicStatus":false,"passwordHash":null,"savedRevisions":[]}